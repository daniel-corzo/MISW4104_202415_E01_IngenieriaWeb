<div class="m-5">
  <div class="col-lg-12 mt-4">
      <div class="container">
          <h1 class="mb-5 title-section" i18n>Create movie</h1>
          <div class="row">
              <div class="container mt-4">
                  <form [formGroup]="peliculaForm" (ngSubmit)="onSubmit()">
                      <div class="mb-3">
                          <label for="title" class="form-label" i18n>Title</label>
                          <input id="title" type="text" class="form-control" formControlName="title" autocomplete="off">
                          <div *ngIf="peliculaForm.get('title')?.invalid && (peliculaForm.get('title')?.dirty || peliculaForm.get('title')?.touched)"
                              class="text-danger">
                              <div *ngIf="peliculaForm.get('title')?.errors?.['required']" i18n>Title is required</div>
                              <div *ngIf="peliculaForm.get('title')?.errors?.['minlength']" i18n>Title must be at least 3 characters long</div>
                          </div>
                      </div>
                      <div class="mb-3">
                        <label for="poster" class="form-label" i18n>Poster</label>
                        <input id="poster" type="text" class="form-control" formControlName="poster" autocomplete="off">
                        <div *ngIf="peliculaForm.get('poster')?.invalid && (peliculaForm.get('poster')?.dirty || peliculaForm.get('poster')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('poster')?.errors?.['required']" i18n>Poster is required</div>
                            <div *ngIf="peliculaForm.get('poster')?.errors?.['pattern']" i18n>Poster must be a url in a valid format</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="duration" class="form-label" i18n>Duration</label>
                        <input id="duration" type="number" class="form-control" formControlName="duration" autocomplete="off">
                        <div *ngIf="peliculaForm.get('duration')?.invalid && (peliculaForm.get('duration')?.dirty || peliculaForm.get('duration')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('duration')?.errors?.['required']" i18n>Duration is required</div>
                            <div *ngIf="peliculaForm.get('duration')?.errors?.['min']" i18n>Duration must be greater than 1</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="country" class="form-label" i18n>Country</label>
                        <input id="country" type="text" class="form-control" formControlName="country" autocomplete="off">
                        <div *ngIf="peliculaForm.get('country')?.invalid && (peliculaForm.get('country')?.dirty || peliculaForm.get('country')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('country')?.errors?.['required']" i18n>Country is required</div>
                            <div *ngIf="peliculaForm.get('country')?.errors?.['minlength']" i18n>Country must be at least 3 characters long</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="releaseDate" class="form-label" i18n>Release Date</label>
                        <input id="releaseDate" type="date" class="form-control" formControlName="releaseDate" autocomplete="off">
                        <div *ngIf="peliculaForm.get('releaseDate')?.invalid && (peliculaForm.get('releaseDate')?.dirty || peliculaForm.get('releaseDate')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('releaseDate')?.errors?.['required']" i18n>Release date is required</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="popularity" class="form-label" i18n>Popularity</label>
                        <input id="popularity" type="number" class="form-control" formControlName="popularity" autocomplete="off">
                        <div *ngIf="peliculaForm.get('popularity')?.invalid && (peliculaForm.get('popularity')?.dirty || peliculaForm.get('popularity')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('popularity')?.errors?.['required']" i18n>Popularity is required</div>
                            <div *ngIf="peliculaForm.get('popularity')?.errors?.['min']" i18n>Popularity must be between 1 and 5</div>
                            <div *ngIf="peliculaForm.get('popularity')?.errors?.['max']" i18n>Popularity must be between 1 and 5</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="genre" class="form-label" i18n>Genre</label>
                        <select id="genre" class="form-select form-control" formControlName="genre">
                            <option *ngFor="let genero of listaGeneros$ | async" [value]="parseJsonToString(genero)" >{{genero.type}}</option>
                        </select>
                        <div *ngIf="peliculaForm.get('genre')?.invalid && (peliculaForm.get('genre')?.dirty || peliculaForm.get('genre')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('genre')?.errors?.['required']" i18n>Genre is required</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="director" class="form-label" i18n>Director</label>
                        <select id="director" class="form-select form-control" formControlName="director">
                            <option *ngFor="let director of listaDirectores$ | async" [value]="parseJsonToString(director)" >{{director.name}}</option>
                        </select>
                        <div *ngIf="peliculaForm.get('director')?.invalid && (peliculaForm.get('director')?.dirty || peliculaForm.get('director')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('director')?.errors?.['required']" i18n>Director is required</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="trailerName" class="form-label" i18n>Trailer name</label>
                        <input id="trailerName" type="text" class="form-control" formControlName="trailerName" autocomplete="off">
                        <div *ngIf="peliculaForm.get('trailerName')?.invalid && (peliculaForm.get('trailerName')?.dirty || peliculaForm.get('trailerName')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('trailerName')?.errors?.['required']" i18n>Trailer name is required</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="trailerUrl" class="form-label" i18n>Trailer url</label>
                        <input id="trailerUrl" type="text" class="form-control" formControlName="trailerUrl" autocomplete="off">
                        <div *ngIf="peliculaForm.get('trailerUrl')?.invalid && (peliculaForm.get('trailerUrl')?.dirty || peliculaForm.get('trailerUrl')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('trailerUrl')?.errors?.['required']" i18n>Trailer url is required</div>
                            <div *ngIf="peliculaForm.get('trailerUrl')?.errors?.['pattern']" i18n>Trailer url must be a url in a valid format</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="trailerDuration" class="form-label" i18n>Trailer duration</label>
                        <input id="trailerDuration" type="number" class="form-control" formControlName="trailerDuration" autocomplete="off">
                        <div *ngIf="peliculaForm.get('trailerDuration')?.invalid && (peliculaForm.get('trailerDuration')?.dirty || peliculaForm.get('trailerDuration')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('trailerDuration')?.errors?.['required']" i18n>Trailer duration is required</div>
                            <div *ngIf="peliculaForm.get('trailerDuration')?.errors?.['min']" i18n>Trailer duration must be greater than 1</div>
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="trailerChannel" class="form-label" i18n>Trailer channel</label>
                        <input id="trailerChannel" type="text" class="form-control" formControlName="trailerChannel" autocomplete="off">
                        <div *ngIf="peliculaForm.get('trailerChannel')?.invalid && (peliculaForm.get('trailerChannel')?.dirty || peliculaForm.get('trailerChannel')?.touched)"
                            class="text-danger">
                            <div *ngIf="peliculaForm.get('trailerChannel')?.errors?.['required']" i18n>Trailer channel is required</div>
                        </div>
                      </div>
                      <button type="submit" class="btn btn-primary" [disabled]="peliculaForm.invalid"
                          i18n>Create</button>    
                  </form>
              </div>
          </div>
      </div>
  </div>
</div>